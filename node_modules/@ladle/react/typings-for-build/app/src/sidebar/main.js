import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import * as React from "react";
import { useHotkeys } from "react-hotkeys-hook";
import config from "../get-config";
import TreeView from "./tree-view";
const Main = ({ stories, story, updateStory, hotkeys, }) => {
    const [search, setSearch] = React.useState("");
    const searchEl = React.useRef(null);
    const treeRoot = React.useRef(null);
    useHotkeys(config.hotkeys.search, () => searchEl.current.focus(), { preventDefault: true, enabled: hotkeys });
    const canonicalSearch = search
        .toLocaleLowerCase()
        .replace(new RegExp("\\s+", "g"), "-");
    const filteredStories = stories.filter((story) => story.includes(canonicalSearch));
    return (_jsxs("nav", { role: "navigation", className: "ladle-aside", children: [_jsx("input", { placeholder: "Search", "aria-label": "Search stories", value: search, ref: searchEl, onKeyDown: (e) => {
                    if (e.key === "ArrowDown") {
                        treeRoot.current.firstChild.focus();
                    }
                }, onChange: (e) => setSearch(e.target.value) }), _jsx(TreeView, { searchRef: searchEl, stories: filteredStories, story: story, hotkeys: hotkeys, updateStory: updateStory, searchActive: search !== "", setTreeRootRef: (root) => (treeRoot.current = root) })] }));
};
export default Main;
